using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Drawing;

namespace mview
{
    public class Colorizer
    {
        // По умолчанию красно-синяя шкала

        int[,] defaultColors = new int[256, 3]{
            {1  ,0  , 255}, {0  ,4  , 255}, {0  ,4  , 255}, {0  ,9  , 255}, {0  ,14 , 255}, {0  ,19 , 255}, {0  ,24 , 255}, {0  ,24 , 255},
            {0  ,29 , 255}, {0  ,34 , 255}, {0  ,39 , 255}, {0  ,44 , 255}, {0  ,44 , 255}, {0  ,49 , 255}, {0  ,54 , 255}, {0  ,59 , 255},
            {0  ,64 , 255}, {0  ,64 , 255}, {0  ,69 , 255}, {0  ,74 , 255}, {0  ,79 , 255}, {0  ,84 , 255}, {0  ,84 , 255}, {0  ,89 , 255},
            {0  ,94 , 255}, {0  ,99 , 255}, {0  ,104, 255}, {0  ,104, 255}, {0  ,109, 255}, {0  ,114, 255}, {0  ,119, 255}, {0  ,124, 255},
            {0  ,124, 255}, {0  ,128, 255}, {0  ,133, 255}, {0  ,138, 255}, {0  ,143, 255}, {0  ,143, 255}, {0  ,148, 255}, {0  ,153, 255},
            {0  ,158, 255}, {0  ,163, 255}, {0  ,163, 255}, {0  ,168, 255}, {0  ,173, 255}, {0  ,178, 255}, {0  ,183, 255}, {0  ,183, 255},
            {0  ,188, 255}, {0  ,193, 255}, {0  ,198, 255}, {0  ,203, 255}, {0  ,203, 255}, {0  ,208, 255}, {0  ,213, 255}, {0  ,218, 255},
            {0  ,223, 255}, {0  ,223, 255}, {0  ,228, 255}, {0  ,233, 255}, {0  ,238, 255}, {0  ,243, 255}, {0  ,243, 255}, {0  ,248, 255},
            {0  ,253, 255}, {0  ,255, 252}, {0  ,255, 247}, {0  ,255, 247}, {0  ,255, 242}, {0  ,255, 237}, {0  ,255, 232}, {0  ,255, 227},
            {0  ,255, 227}, {0  ,255, 222}, {0  ,255, 217}, {0  ,255, 212}, {0  ,255, 207}, {0  ,255, 207}, {0  ,255, 202}, {0  ,255, 197},
            {0  ,255, 192}, {0  ,255, 187}, {0  ,255, 187}, {0  ,255, 182}, {0  ,255, 177}, {0  ,255, 172}, {0  ,255, 167}, {0  ,255, 167},
            {0  ,255, 162}, {0  ,255, 157}, {0  ,255, 152}, {0  ,255, 147}, {0  ,255, 147}, {0  ,255, 142}, {0  ,255, 137}, {0  ,255, 132},
            {0  ,255, 128}, {0  ,255, 128}, {0  ,255, 123}, {0  ,255, 118}, {0  ,255, 113}, {0  ,255, 108}, {0  ,255, 108}, {0  ,255, 103},
            {0  ,255, 98 }, {0  ,255, 93 }, {0  ,255, 88 }, {0  ,255, 88 }, {0  ,255, 83 }, {0  ,255, 78 }, {0  ,255, 73 }, {0  ,255, 68 },
            {0  ,255, 68 }, {0  ,255, 63 }, {0  ,255, 58 }, {0  ,255, 53 }, {0  ,255, 48 }, {0  ,255, 48 }, {0  ,255, 43 }, {0  ,255, 38 },
            {0  ,255, 33 }, {0  ,255, 28 }, {0  ,255, 28 }, {0  ,255, 23 }, {0  ,255, 18 }, {0  ,255, 13 }, {0  ,255, 8  }, {0  ,255, 8  },
            {0  ,255, 3  }, {2  ,255, 0  }, {7  ,255, 0  }, {12 ,255, 0  }, {12 ,255, 0  }, {17 ,255, 0  }, {22 ,255, 0  }, {27 ,255, 0  },
            {32 ,255, 0  }, {32 ,255, 0  }, {37 ,255, 0  }, {42 ,255, 0  }, {47 ,255, 0  }, {52 ,255, 0  }, {52 ,255, 0  }, {57 ,255, 0  },
            {62 ,255, 0  }, {67 ,255, 0  }, {72 ,255, 0  }, {72 ,255, 0  }, {77 ,255, 0  }, {82 ,255, 0  }, {87 ,255, 0  }, {92 ,255, 0  },
            {92 ,255, 0  }, {97 ,255, 0  }, {102,255, 0  }, {107,255, 0  }, {112,255, 0  }, {112,255, 0  }, {117,255, 0  }, {122,255, 0  },
            {127,255, 0  }, {131,255, 0  }, {131,255, 0  }, {136,255, 0  }, {141,255, 0  }, {146,255, 0  }, {151,255, 0  }, {151,255, 0  },
            {156,255, 0  }, {161,255, 0  }, {166,255, 0  }, {171,255, 0  }, {171,255, 0  }, {176,255, 0  }, {181,255, 0  }, {186,255, 0  },
            {191,255, 0  }, {191,255, 0  }, {196,255, 0  }, {201,255, 0  }, {206,255, 0  }, {211,255, 0  }, {211,255, 0  }, {216,255, 0  },
            {221,255, 0  }, {226,255, 0  }, {231,255, 0  }, {231,255, 0  }, {236,255, 0  }, {241,255, 0  }, {246,255, 0  }, {251,255, 0  },
            {251,255, 0  }, {255,254, 0  }, {255,249, 0  }, {255,244, 0  }, {255,239, 0  }, {255,239, 0  }, {255,234, 0  }, {255,229, 0  },
            {255,224, 0  }, {255,219, 0  }, {255,219, 0  }, {255,214, 0  }, {255,209, 0  }, {255,204, 0  }, {255,199, 0  }, {255,199, 0  },
            {255,194, 0  }, {255,189, 0  }, {255,184, 0  }, {255,179, 0  }, {255,179, 0  }, {255,174, 0  }, {255,169, 0  }, {255,164, 0  },
            {255,159, 0  }, {255,159, 0  }, {255,154, 0  }, {255,149, 0  }, {255,144, 0  }, {255,139, 0  }, {255,139, 0  }, {255,134, 0  },
            {255,129, 0  }, {255,125, 0  }, {255,120, 0  }, {255,120, 0  }, {255,115, 0  }, {255,110, 0  }, {255,105, 0  }, {255,100, 0  },
            {255,100, 0  }, {255,95 , 0  }, {255,90 , 0  }, {255,85 , 0  }, {255,80 , 0  }, {255,80 , 0  }, {255,75 , 0  }, {255,70 , 0  },
            {255,65 , 0  }, {255,60 , 0  }, {255,60 , 0  }, {255,55 , 0  }, {255,50 , 0  }, {255,45 , 0  }, {255,40 , 0  }, {255,40 , 0  },
            {255,35 , 0  }, {255,30 , 0  }, {255,25 , 0  }, {255,20 , 0  }, {255,20 , 0  }, {255,15 , 0  }, {255,10 , 0  }, {255,5  , 0  }};

        double min = 0.000;
        double max = 1.000;

        public void SetMinimum(double value)
        {
            min = value;
        }
        public double GetMinimum()
        {
            return min;
        }

        public double GetMaximum()
        {
            return max;
        }

        public void SetMaximum(double value)
        {
            max = value;
        }

        public Color ColorByValue(double value)
        {
            value = (value - min) / (max - min);
            int index = (int)(value * 255); // Определяем попадание в один из 255 цветов
            if (index > 255) index = 255; // Если перелёт - берём максимальное
            if (index < 0) index = 0; // И если недолёт - то минимальное значение таблицы цветов

            return Color.FromArgb(defaultColors[index, 0], defaultColors[index, 1], defaultColors[index, 2]);
        }
    }

}
